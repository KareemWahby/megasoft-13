<!DOCTYPE html>
<html>
<head>
<!--
<style> 
#txt
{
top:100px;
left:200px;
position:absolute;
width:300px;
height:100px;
box-shadow: 0px 0px 15px 2px violet;
border:none;
}

.btn{
position:absolute;
width:100px;
height:100px;
box-shadow: 0px 0px 15px 2px orange;
border:none;

}
</style>
-->

<!--
<style>
input:active, input:focus ,input:hover{
    box-shadow:0px 0px 10px 2px orange;
    border:0;
}
</style>
-->


<script>
function highlight(id)
{
  //alert(id);
var element= document.getElementById(id);
element.style.border='none';
element.style.boxShadow="0px 0px 6px 2px orange";
}
 
 function dehighlight(id){
  var element = document.getElementById(id);
  element.style.boxShadow= 'none';
  element.style.border=1;
 } 

 function dehighlight_all(){
  $("input").each(function(){
    dehighlight(this.id);
  });
 }
//document.getElementById('bttn').onclick='highlight(el_id)';
//alert("Would you please enter some text?"); 
</script>

<!--<script type="text/javascript">
function notEmpty(){
  var myTextField = document.getElementById('myText');
  if(myTextField.value != "")
    alert("You entered: " + myTextField.value)
  else
    alert("Would you please enter some text?")    
}
</script> -->

</head>
<body>

<div id="content">
  
<input id="cmp4" type="text"/>

<input type = "submit" value ="Step 1 cmp" class="btn" id='cmp'/>
<input type ="button" value = "Step 2 cmp" class= "btn" id= 'cmp2'/>
<input type ="button"  value= "Step 3 cmp" class="btn" id='cmp3' />

</div>

<%= form_for @step do |f| %>
  <%= hidden_field_tag "change_id", @step.id %>
  <%= submit_tag %>
<% end %>


<script>
var currstep_element_id= "<%= @step.component_id %>";

//  $('#bttn').click(function() {
//   highlight(currstep_id);
// });


// $(document).ready(function() {
//     $("input").click(function(event) {
//         alert(event.target.id);
//     });
// });

$(window).load(function (){
  highlight(currstep_element_id); //when the page load the 1st step's elements are highlighted
});


 var count =1;
 var currstep_id= "<%= @step.id %>";
 var step_event = "<%= @step.event %>";

 //alert("<%= @step.event %>");

 $("input").on(step_event, function(event) {

  var curr_element_id= event.target.id;
  if (curr_element_id == currstep_element_id) {
    count=count+1; 
    currstep_id = <%=@step.id%>+1;
    $("#change_id").val(currstep_id);
 
    dehighlight(currstep_element_id);
 
    $(function() { $("form").submit(); });
    currstep_element_id= "<%=@step.component_id%>";
    highlight(currstep_element_id);
       //currstep_element_id= "<%=@step.component_id%>";
       //highlight(currstep_element_id);
       }
    });

     $(window).load(function(){
       currstep_element_id= "<%=@step.component_id%>";
       highlight(currstep_element_id);

    });


  //    $("input").click( function(event) {

  // var curr_element_id= event.target.id;
  // if (curr_element_id == currstep_element_id) {
  //   count=count+1; 
  //  // curr_element_id= <%=@step.component_id%>;
  //   //alert("cmp"+count);
  //   highlight("cmp"+count);
  //   dehighlight(curr_element_id);
  //   curr_element_id="cmp"+count;
  //   currstep_element_id= curr_element_id;

  //  // alert (event.target.id + "clicked");

  //      }
  //   });

 // console.log( index + ": " + $(this).text() );
//    $( "input" ).each(function() {
// });
</script>
</body>
</html>